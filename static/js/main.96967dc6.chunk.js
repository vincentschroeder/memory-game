(this["webpackJsonpmemory-game"]=this["webpackJsonpmemory-game"]||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(4),i=a.n(l),c=a(1),s=a(2),o=a(5),u=a(6),m=a(8),d=a(7),y=(a(14),function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*t),r=e[a];e[a]=e[t],e[t]=r}return e}),E=function(e){return e.reduce((function(e,t){return!e.length||e.length&&t.score===e[0].score?e.push(t):t.score>e[0].score&&(e=[t]),e}),[])},h=function(e){var t=e.players,a=e.currentPlayer;return n.a.createElement("div",{className:"playerBox"},n.a.createElement("div",null,n.a.createElement("div",{className:"player"},n.a.createElement("small",null,"Name")," ",n.a.createElement("small",null,"Score")),t.map((function(e){return n.a.createElement("div",{key:e.id,className:a.id===e.id?"player activePlayer":"player"},n.a.createElement("span",null,e.name)," ",n.a.createElement("div",null,e.score," Points"))}))))},f=function(e){var t=e.players,a=e.currentPlayer,r=e.handlePlayerNameChange,l=e.handlePlayerSubmit,i=e.handleClickStartGame;return n.a.createElement("div",{className:"playerSelector"},n.a.createElement("h2",null,"Welcome to ",n.a.createElement("span",null,"EyeEmory!")),n.a.createElement("div",null,"The most beautiful memory game you've ever played."),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement("form",{onSubmit:l},"Player ",a.id,":",n.a.createElement("input",{type:"text",name:"playerName",value:a.name,onChange:r,placeholder:"Name of Player ".concat(a.id)}),n.a.createElement("button",{type:"submit"},"Add Player"))),t.length>0&&n.a.createElement("div",{className:"registered"},"Horray, ",n.a.createElement("span",null,t.slice(-1)[0].name)," is in the game!"),t.length>0&&n.a.createElement("div",null,n.a.createElement("button",{onClick:i},"Start Game")))},v=function(e){var t=e.card,a=e.visible,r=e.isEmpty,l=e.clickHandler,i=r?"invisible card":a?"visible card":"card",c=a||r?{backgroundImage:"url(".concat(t.photoUrl,")")}:{};return n.a.createElement("div",{style:c,className:i,onClick:r||a?null:l},!a&&!r&&n.a.createElement("small",null,"EyeEm"))};function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var C=n.a.createElement("circle",{cx:50,cy:50,fill:"none",stroke:"#fff",strokeWidth:10,r:35,strokeDasharray:"164.93361431346415 56.97787143782138",transform:"rotate(137.143 50 50)"},n.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 50;360 50 50",keyTimes:"0;1",dur:"1.4s",begin:"0s",repeatCount:"indefinite"})),b=function(e){var t=e.svgRef,a=e.title,r=p(e,["svgRef","title"]);return n.a.createElement("svg",g({width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:"lds-rolling",ref:t},r),a?n.a.createElement("title",null,a):null,C)},S=n.a.forwardRef((function(e,t){return n.a.createElement(b,g({svgRef:t},e))})),P=(a.p,function(e){fetch("https://api.eyeem.com/photos/popular?limit=10",{method:"GET",headers:{"X-Client-Id":"9iNUTAc4FCsRj5Co6vJgzVySHxuJtL3Y"}}).then((function(e){return e.json()})).then((function(t){var a=t.photos.items.map((function(e){return{id:e.id,photoUrl:e.photoUrl}}));return e(a)})).catch((function(){return e({error:"API_FETCHING_ERROR"})}))}),A=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).defaultState={currentPlayer:{id:1,name:"",score:0},players:[],winner:[],cards:[],visibleCards:[],emptyCards:[],currentState:"selectingPlayers"},e.state=e.defaultState,e.machine={initial:"selectingPlayers",states:{selectingPlayers:{on:{START_GAME:"startingGame",ADD_PLAYER:"selectingPlayers"}},startingGame:{on:{FETCH_CARDS:"fetchingCards"}},fetchingCards:{on:{CARDS_FETCHED:"waitingForNextTurn",FETCH_FAILED:"fetchingError"}},fetchingError:{on:{START_GAME:"startingGame"}},waitingForNextTurn:{on:{REVEAL_CARD:"reavalingCards",GAME_ENDED:"gameEnded"}},reavalingCards:{on:{REVEAL_CARD:"reavalingCards",CARDS_MATCHED:"waitingForNextTurn",CARDS_MISMATCHED:"waitingForNextTurn"}},gameEnded:{on:{NEW_GAME:"selectingPlayers",START_GAME:"startingGame"}}}},e.commands={selectingPlayers:function(){return e.addPlayer()},startingGame:function(){return e.startGame()},fetchingCards:function(){return e.fetchCards()},reavalingCards:function(t){return e.revealCard(t)},gameEnded:function(t){return e.getWinners(t)}},e.transition=function(t,a){var r=e.machine.states[e.state.currentState].on[t];e.setState({currentState:r},(function(){return e.commands[r]&&e.commands[r](a)}))},e.handleClickNewGame=function(){e.setState(e.defaultState)},e.handleClickStartGame=function(){return e.transition("START_GAME")},e.handleCardClick=function(t){e.state.visibleCards.length<2&&e.transition("REVEAL_CARD",{cardIndex:t})},e.handlePlayerSubmit=function(t){t.preventDefault(),e.state.currentPlayer.name&&e.transition("ADD_PLAYER")},e.handlePlayerNameChange=function(t){e.setState({currentPlayer:{id:e.state.players.length+1,name:t.target.value,score:0}})},e.resetScores=function(){e.setState({players:e.state.players.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{score:0})}))})},e.isGameOver=function(){var t=e.state,a=t.currentState,r=t.cards;return t.emptyCards.length===r.length&&"waitingForNextTurn"===a},e.getWinners=function(t){e.setState({winner:E(t)})},e.addPlayer=function(){var t=e.state,a=t.players,r=t.currentPlayer;e.setState({players:[].concat(Object(c.a)(a),[r]),currentPlayer:{id:a.length+2,name:"",score:0}})},e.startGame=function(){e.resetScores(),e.setState({visibleCards:[],emptyCards:[],winner:[],currentPlayer:e.state.players[0]}),e.transition("FETCH_CARDS")},e.fetchCards=function(){P((function(t){return t.error?e.transition("FETCH_FAILED"):function(){var a=[].concat(Object(c.a)(t),Object(c.a)(t));y(a),e.setState({cards:a}),e.transition("CARDS_FETCHED")}()}))},e.revealCard=function(t){var a=t.cardIndex,r=e.state,n=r.visibleCards,l=r.cards,i=1===n.length,s=i&&l[a].id===l[n[0]].id,o=[].concat(Object(c.a)(n),[a]);e.setState({visibleCards:o}),s&&e.matchCards(o),i&&!s&&e.mismatchCards()},e.matchCards=function(t){var a=e.state,r=a.emptyCards,n=a.players;n[a.currentPlayer.id-1].score++,e.setState({emptyCards:[].concat(Object(c.a)(r),Object(c.a)(t)),visibleCards:[],players:n}),e.transition("CARDS_MATCHED")},e.mismatchCards=function(){setTimeout((function(){e.setState({visibleCards:[],currentPlayer:e.getNextPlayer()}),e.transition("CARDS_MISMATCHED")}),1e3)},e}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(){this.isGameOver()&&this.transition("GAME_ENDED",this.state.players)}},{key:"getNextPlayer",value:function(){var e=this.state,t=e.players,a=e.currentPlayer;return t[a.id]?t[a.id]:t[0]}},{key:"render",value:function(){var e=this,t=this.state,a=t.currentPlayer,r=t.players,l=t.currentState,i=t.cards,s=t.visibleCards,o=t.emptyCards,u=t.winner;return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"background"}),n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"logo"},"EyeEmory")),"selectingPlayers"===l&&n.a.createElement(f,{players:r,currentPlayer:a,handlePlayerNameChange:this.handlePlayerNameChange,handlePlayerSubmit:this.handlePlayerSubmit,handleClickStartGame:this.handleClickStartGame}),"selectingPlayers"!==l&&n.a.createElement(h,{players:r,currentPlayer:a}),"fetchingCards"===l&&n.a.createElement("div",{className:"loader"},n.a.createElement(S,null)),"fetchingError"===l&&n.a.createElement("div",{className:"centered fetchingError "},n.a.createElement("div",null,"Sorry, the connection to the image server is not available, please try again."),n.a.createElement("button",{onClick:this.handleClickStartGame},"Try again")),("waitingForNextTurn"===l||"reavalingCards"===l)&&n.a.createElement("div",{className:"cards"},i.map((function(t,a){return n.a.createElement(v,{isEmpty:o.includes(a),visible:s.includes(a),key:a,card:t,clickHandler:function(){return e.handleCardClick(a)}})})),Object(c.a)(Array(10).keys()).map((function(e){return n.a.createElement("div",{key:e,className:"emptyFillers"})}))),"gameEnded"===l&&n.a.createElement("div",{className:"congrats"},n.a.createElement("div",null,n.a.createElement("h2",null,"Congratulations!"),"The ",u.length>1?"winners are":"winner is"),u.map((function(e,t){return n.a.createElement("div",{key:t},e.name)})),n.a.createElement("button",{onClick:this.handleClickNewGame},"Start a new Game"),n.a.createElement("button",{onClick:this.handleClickStartGame},"Revenge")))}}]),a}(r.Component);i.a.render(n.a.createElement(A,null),document.getElementById("root"))},9:function(e,t,a){e.exports=a(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.96967dc6.chunk.js.map